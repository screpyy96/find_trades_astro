---
// Mobile header - only visible on mobile (hidden on desktop)
// Shows platform-specific download button based on user's device
---

<header class="lg:hidden fixed top-0 left-0 right-0 w-full z-50 bg-white border-b border-slate-200 shadow-sm">
  <div class="flex items-center justify-between h-16 px-3">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2">
      <img src="/logo.svg" alt="" class="h-7 w-7" width="28" height="28" decoding="async" />
      <span class="text-base font-bold text-slate-900">Meserias Local</span>
    </a>
    
    <!-- Platform-specific App Download Button -->
    <div id="app-download-btn">
      <!-- Google Play Button (shown on Android) -->
      <a 
        id="google-play-btn"
        href="https://play.google.com/store/apps/details?id=com.screpyy.meserias" 
        target="_blank"
        rel="noopener noreferrer"
        class="group relative hidden"
        aria-label="Descarcă din Google Play"
      >
        <div class="bg-[#1a1f2e] hover:bg-[#252b3d] rounded-lg px-3 py-2 flex items-center gap-2.5 transition-all transform active:scale-95 shadow-md">
          <svg class="w-6 h-6 flex-shrink-0" viewBox="0 0 24 24" fill="none">
            <path d="M3 20.5V3.5C3 2.91 3.34 2.39 3.84 2.15L13.69 12L3.84 21.85C3.34 21.61 3 21.09 3 20.5Z" fill="#00D9FF"/>
            <path d="M16.81 15.12L6.05 21.34L14.54 12.85L16.81 15.12Z" fill="#FFCE00"/>
            <path d="M3.84 2.15C4.25 1.95 4.73 1.96 5.13 2.18L16.81 8.88L14.54 11.15L3.84 2.15Z" fill="#FF3A44"/>
            <path d="M16.81 8.88L19.78 10.58C20.54 11.03 20.54 12.12 19.78 12.58L16.81 14.27L14.54 12L16.81 8.88Z" fill="#00F076"/>
          </svg>
          <div class="text-left">
            <div class="text-white/80 text-[9px] uppercase tracking-wider font-medium leading-tight">Descarcă aplicația</div>
            <div class="text-white text-sm font-bold leading-tight">Google Play</div>
          </div>
        </div>
      </a>
      
      <!-- App Store Button (shown on iOS) -->
      <a 
        id="app-store-btn"
        href="https://apps.apple.com/gb/app/meserias-local/id6755662662" 
        target="_blank"
        rel="noopener noreferrer"
        class="group relative hidden"
        aria-label="Descarcă din App Store"
      >
        <div class="bg-[#1a1f2e] hover:bg-[#252b3d] rounded-lg px-3 py-2 flex items-center gap-2.5 transition-all transform active:scale-95 shadow-md">
          <svg class="w-6 h-6 flex-shrink-0" viewBox="0 0 24 24" fill="white">
            <path d="M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.09997 22C7.78997 22.05 6.79997 20.68 5.95997 19.47C4.24997 17 2.93997 12.45 4.69997 9.39C5.56997 7.87 7.12997 6.91 8.81997 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.1 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"/>
          </svg>
          <div class="text-left">
            <div class="text-white/80 text-[9px] uppercase tracking-wider font-medium leading-tight">Descarcă aplicația</div>
            <div class="text-white text-sm font-bold leading-tight">App Store</div>
          </div>
        </div>
      </a>
    </div>
  </div>
</header>

<script>
  // Detect platform and show appropriate download button
  function detectPlatform() {
    const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;
    const googlePlayBtn = document.getElementById('google-play-btn');
    const appStoreBtn = document.getElementById('app-store-btn');
    
    if (!googlePlayBtn || !appStoreBtn) return;
    
    // Check for Apple devices (iOS: iPhone, iPad, iPod) or macOS
    const isAppleDevice = /iPad|iPhone|iPod/.test(userAgent) && !(window as any).MSStream;
    const isMac = /Macintosh|MacIntel|MacPPC|Mac68K/.test(userAgent);
    
    if (isAppleDevice || isMac) {
      appStoreBtn.classList.remove('hidden');
      googlePlayBtn.classList.add('hidden');
    } else {
      // Default to Google Play for Android and other devices
      googlePlayBtn.classList.remove('hidden');
      appStoreBtn.classList.add('hidden');
    }
  }
  
  // Run on page load
  detectPlatform();
</script>
