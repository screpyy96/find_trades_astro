---
import Base from '../../../../../layouts/Base.astro';
import { cities, getCityBySlug, getNearbyCities } from '../../../../../data';
import { getServiceCityPage } from '../../../../../lib/sanity';
import { supabase } from '../../../../../lib/supabase';
import { generateFallbackContent } from '../../../../../lib/seo-fallback';

export const prerender = false;
export const config = { revalidate: 3600 };

const { categorie, serviciu, oras } = Astro.params;

// Validate required params
if (!categorie || !serviciu || !oras) {
  return Astro.redirect('/404');
}

if (!supabase) {
  if (import.meta.env.DEV) {
    console.warn('Supabase client unavailable when rendering service city page');
  }
  return Astro.redirect('/servicii', 500);
}

const { data: trade, error: tradeError } = await supabase
  .from('trades')
  .select('id, name, slug, category')
  .eq('slug', serviciu)
  .single();

if (tradeError || !trade) {
  return Astro.redirect('/404');
}

// APP_URL points to Remix app for login/register/dashboard
const APP_URL = 'https://app.meseriaslocal.ro';

const city = getCityBySlug(oras);

if (!trade || !city) {
  return Astro.redirect('/404');
}

const service = {
  name: trade.name,
  slug: trade.slug,
  category: trade.category,
  categorySlug: categorie,
};

// Try to get custom content from Sanity
const sanityContent = await getServiceCityPage(serviciu, oras);

// Debug logging
if (import.meta.env.DEV) {
  console.log('ðŸ” Sanity Query Debug:');
  console.log('  tradeSlug:', serviciu);
  console.log('  citySlug:', oras);
  console.log('  Found content:', sanityContent ? 'âœ… YES' : 'âŒ NO');
  if (sanityContent) {
    console.log('  Title:', sanityContent.title);
    console.log('  Has content:', !!sanityContent.content);
  }
}

const nearbyCities = getNearbyCities(oras);
const nearbyCityLinks = nearbyCities.length > 0
  ? nearbyCities
  : cities.filter(c => c.slug !== city.slug).slice(0, 4);

// Get similar services from Supabase
let allTrades = null;
if (supabase) {
  const result = await supabase
    .from('trades')
    .select('id, name, slug, category')
    .eq('category', trade.category)
    .neq('slug', trade.slug)
    .limit(4);
  allTrades = result.data;
}

const similarServices = (allTrades || []).map(t => ({
  name: t.name,
  slug: t.slug,
  categorySlug: categorie,
}));

// Pre-fetch all related service categories if we have Sanity content
let relatedServiceCategories: Record<string, string> = {};
if (sanityContent?.relatedServices && sanityContent.relatedServices.length > 0 && supabase) {
  const slugs = sanityContent.relatedServices.map((rs: any) => {
    let cleanSlug = rs.serviceSlug.replace(/^\/+|\/+$/g, '');
    if (cleanSlug.includes('/')) {
      const parts = cleanSlug.split('/');
      cleanSlug = parts[parts.length - 1];
    }
    return cleanSlug;
  });
  
  const { data: relatedTrades } = await supabase
    .from('trades')
    .select('slug, category')
    .in('slug', slugs);
  
  if (relatedTrades) {
    relatedTrades.forEach(t => {
      relatedServiceCategories[t.slug] = t.category;
    });
  }
}

// Generate comprehensive fallback content
const fallbackContent = generateFallbackContent({
  serviceName: service.name,
  cityName: city.name,
  categoryName: trade.category || 'Servicii',
  serviceSlug: serviciu,
  citySlug: oras,
  categorySlug: categorie,
  relatedServices: similarServices,
  relatedCities: nearbyCityLinks
});

// SEO Meta Data - use Sanity content if available, otherwise use fallback
const title = sanityContent?.title || sanityContent?.heroTitle || fallbackContent.metaTitle;
const description = sanityContent?.metaDescription || sanityContent?.heroDescription || fallbackContent.metaDescription;
const keywords = sanityContent?.seoKeywords?.join(', ') || `${service.name.toLowerCase()} ${city.name.toLowerCase()}, meseriasi ${service.name.toLowerCase()} ${city.name.toLowerCase()}, servicii ${service.name.toLowerCase()} ${city.name.toLowerCase()}, pret ${service.name.toLowerCase()} ${city.name.toLowerCase()}`;
const canonical = fallbackContent.canonical;

// Default content if no Sanity override - use SEO-optimized fallback
const defaultContent = fallbackContent.fallbackHtml;

// Helper to render portable text with support for links and marks
function renderPortableText(blocks: any[]) {
  if (!blocks) return '';
  
  // Track marks that are links
  const markDefs = blocks.reduce((acc: any, block: any) => {
    if (block.markDefs) {
      block.markDefs.forEach((def: any) => {
        acc[def._key] = def;
      });
    }
    return acc;
  }, {});
  
  let html = '';
  let inList = false;
  let listType = '';
  
  blocks.forEach((block: any, index: number) => {
    if (block._type === 'block') {
      const children = block.children?.map((child: any) => {
        let text = child.text || '';
        
        // Process marks (bold, italic, links, etc.)
        if (child.marks && child.marks.length > 0) {
          child.marks.forEach((mark: string) => {
            // Check if it's a link mark
            if (markDefs[mark]) {
              const linkDef = markDefs[mark];
              if (linkDef._type === 'link') {
                const href = linkDef.href || '';
                const target = href.startsWith('http') ? ' target="_blank" rel="noopener noreferrer"' : '';
                text = `<a href="${href}"${target} class="text-emerald-600 hover:text-emerald-700 font-medium underline decoration-2 underline-offset-2">${text}</a>`;
              }
            }
            // Standard marks
            else if (mark === 'strong') {
              text = `<strong class="font-semibold text-slate-900">${text}</strong>`;
            } else if (mark === 'em') {
              text = `<em>${text}</em>`;
            } else if (mark === 'underline') {
              text = `<u>${text}</u>`;
            } else if (mark === 'code') {
              text = `<code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm font-mono">${text}</code>`;
            }
          });
        }
        
        return text;
      }).join('') || '';
      
      // Handle list items
      if (block.listItem) {
        const currentListType = block.listItem === 'bullet' ? 'ul' : 'ol';
        
        // Start new list if needed
        if (!inList || listType !== currentListType) {
          if (inList) html += `</${listType}>`;
          html += `<${currentListType} class="space-y-3 my-8">`;
          inList = true;
          listType = currentListType;
        }
        
        if (block.listItem === 'bullet') {
          html += `<li class="flex items-start gap-3 text-slate-700 leading-relaxed text-base"><span class="text-emerald-600 font-bold text-xl mt-0.5 flex-shrink-0">â€¢</span><span>${children}</span></li>`;
        } else {
          html += `<li class="text-slate-700 leading-relaxed text-base">${children}</li>`;
        }
        
        // Close list if next block is not a list item
        const nextBlock = blocks[index + 1];
        if (!nextBlock || !nextBlock.listItem) {
          html += `</${listType}>`;
          inList = false;
          listType = '';
        }
      } else {
        // Close any open list
        if (inList) {
          html += `</${listType}>`;
          inList = false;
          listType = '';
        }
        
        // Handle different block styles - premium visual design
        if (block.style === 'h2') {
          html += `<h2 class="text-2xl md:text-3xl font-bold text-slate-900 mt-12 mb-6 pb-3 border-b-2 border-gradient-to-r from-emerald-500 to-teal-500 flex items-center gap-3">
            <span class="w-1.5 h-8 bg-gradient-to-b from-emerald-500 to-teal-500 rounded-full"></span>
            ${children}
          </h2>`;
        } else if (block.style === 'h3') {
          html += `<h3 class="text-xl md:text-2xl font-semibold text-slate-900 mt-10 mb-4 flex items-center gap-3">
            <span class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center text-white text-sm flex-shrink-0">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/></svg>
            </span>
            <span>${children}</span>
          </h3>`;
        } else if (block.style === 'h4') {
          html += `<h4 class="text-lg md:text-xl font-semibold text-slate-900 mt-8 mb-3 flex items-center gap-2">
            <span class="w-1 h-6 bg-emerald-500 rounded-full"></span>
            ${children}
          </h4>`;
        } else if (block.style === 'blockquote') {
          html += `<blockquote class="border-l-4 border-emerald-500 bg-gradient-to-r from-emerald-50 to-transparent pl-6 pr-4 py-5 italic text-slate-700 my-8 rounded-r-xl shadow-sm">${children}</blockquote>`;
        } else {
          html += `<p class="text-slate-700 leading-relaxed mb-6 text-base">${children}</p>`;
        }
      }
    }
  });
  
  // Close any remaining open list
  if (inList) {
    html += `</${listType}>`;
  }
  
  return html;
}

interface ServiceMetrics {
  workerCount: number;
  verifiedCount: number;
  avgRating: number | null;
  jobsLast30Days: number;
  avgBudget: number | null;
}

const METRICS_DEFAULT: ServiceMetrics = {
  workerCount: 0,
  verifiedCount: 0,
  avgRating: null,
  jobsLast30Days: 0,
  avgBudget: null
};

function chunkArray<T>(items: T[], size: number): T[][] {
  if (size <= 0) return [items];
  const chunks: T[][] = [];
  for (let i = 0; i < items.length; i += size) {
    chunks.push(items.slice(i, i + size));
  }
  return chunks;
}

async function fetchServiceMetrics(params: { tradeId: number; serviceName: string; cityName: string }): Promise<ServiceMetrics> {
  if (!supabase) return METRICS_DEFAULT;
  const metrics: ServiceMetrics = { ...METRICS_DEFAULT };
  const cityNeedle = params.cityName.toLowerCase();

  try {
    const { data: workerTradeRows, error: workerTradesError } = await supabase
      .from('worker_trades')
      .select('profile_id')
      .contains('trade_ids', [params.tradeId]);

    if (!workerTradesError && workerTradeRows && workerTradeRows.length > 0) {
      const workerIds = workerTradeRows.map(row => row.profile_id);
      const chunks = chunkArray(workerIds, 60);
      let matchedProfiles: Array<{ rating: number | null; is_verified: boolean | null; address: string | null }> = [];

      for (const chunk of chunks) {
        if (chunk.length === 0) continue;
        const { data: profileChunk, error: profileError } = await supabase
          .from('profiles')
          .select('id, rating, is_verified, address')
          .in('id', chunk)
          .eq('role', 'worker');

        if (profileError || !profileChunk) continue;

        matchedProfiles = matchedProfiles.concat(
          profileChunk.filter(profile => (profile.address || '').toLowerCase().includes(cityNeedle))
        );
      }

      metrics.workerCount = matchedProfiles.length;
      metrics.verifiedCount = matchedProfiles.filter(profile => profile.is_verified).length;
      const ratedProfiles = matchedProfiles.filter(profile => typeof profile.rating === 'number');
      if (ratedProfiles.length > 0) {
        const totalRating = ratedProfiles.reduce((sum, profile) => sum + (profile.rating || 0), 0);
        metrics.avgRating = totalRating / ratedProfiles.length;
      }
    }

    const createdAfter = new Date();
    createdAfter.setDate(createdAfter.getDate() - 30);

    const { data: jobRows, error: jobsError } = await supabase
      .from('jobs')
      .select('id, budget, address, tradeType, created_at')
      .gte('created_at', createdAfter.toISOString())
      .limit(500);

    if (!jobsError && jobRows) {
      const tradeNeedle = params.serviceName.toLowerCase();
      const filteredJobs = jobRows.filter(job => {
        const tradeMatch = job.tradeType ? job.tradeType.toLowerCase().includes(tradeNeedle) : false;
        const cityMatch = job.address ? job.address.toLowerCase().includes(cityNeedle) : false;
        return tradeMatch && cityMatch;
      });

      metrics.jobsLast30Days = filteredJobs.length;
      const budgets = filteredJobs
        .map(job => job.budget)
        .filter((value): value is number => typeof value === 'number' && value > 0);
      if (budgets.length > 0) {
        metrics.avgBudget = budgets.reduce((sum, value) => sum + value, 0) / budgets.length;
      }
    }
  } catch (error) {
    console.error('Failed to compute service metrics', error);
  }

  return metrics;
}

function createLocalBusinessSchema(params: { serviceName: string; cityName: string; canonical: string; metrics: ServiceMetrics }) {
  const schema: Record<string, any> = {
    '@context': 'https://schema.org',
    '@type': 'LocalBusiness',
    name: `${params.serviceName} ${params.cityName} | Meserias Local`,
    description: `Servicii ${params.serviceName.toLowerCase()} Ã®n ${params.cityName} prin Meserias Local`,
    url: params.canonical,
    areaServed: {
      '@type': 'AdministrativeArea',
      name: params.cityName
    },
    address: {
      '@type': 'PostalAddress',
      addressLocality: params.cityName,
      addressCountry: 'RO'
    }
  };

  if (params.metrics.workerCount) {
    schema.numberOfEmployees = params.metrics.workerCount;
  }

  if (params.metrics.avgRating && params.metrics.workerCount >= 3) {
    schema.aggregateRating = {
      '@type': 'AggregateRating',
      ratingValue: params.metrics.avgRating.toFixed(1),
      reviewCount: Math.max(params.metrics.workerCount, params.metrics.verifiedCount || 1)
    };
  }

  if (params.metrics.avgBudget) {
    schema.offers = {
      '@type': 'Offer',
      priceCurrency: 'RON',
      price: Math.round(params.metrics.avgBudget),
      availability: 'https://schema.org/InStock'
    };
  }

  return schema;
}

function buildFaqSchema(faqItems?: Array<{ question: string; answer: string }>) {
  if (!faqItems || faqItems.length === 0) return null;
  return {
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: faqItems.map(item => ({
      '@type': 'Question',
      name: item.question,
      acceptedAnswer: {
        '@type': 'Answer',
        text: item.answer
      }
    }))
  };
}

function buildOfferCatalogSchema(priceRanges?: Array<{ service: string; minPrice: number; maxPrice: number }>, serviceName?: string, cityName?: string) {
  if (!priceRanges || priceRanges.length === 0 || !serviceName || !cityName) return null;
  return {
    '@context': 'https://schema.org',
    '@type': 'OfferCatalog',
    name: `${serviceName} ${cityName} - Tarife`,
    itemListElement: priceRanges.map(price => ({
      '@type': 'Offer',
      name: price.service,
      priceCurrency: 'RON',
      priceSpecification: {
        '@type': 'PriceSpecification',
        priceCurrency: 'RON',
        minPrice: price.minPrice,
        maxPrice: price.maxPrice
      },
      areaServed: cityName
    }))
  };
}

const content = sanityContent?.content ? renderPortableText(sanityContent.content) : defaultContent;

// Hero content
const heroTitle = sanityContent?.heroTitle || fallbackContent.h1;
const heroSubtitle = sanityContent?.heroSubtitle || `Servicii Profesionale Ã®n ${city.name}`;
const heroDescription = sanityContent?.heroDescription || `GÄƒseÈ™te meseriaÈ™i ${service.name.toLowerCase()} verificaÈ›i Ã®n ${city.name}. ComparÄƒ oferte gratuite, vezi recenzii È™i contacteazÄƒ direct. FÄƒrÄƒ comisioane, rÄƒspuns rapid!`;

const metrics = await fetchServiceMetrics({
  tradeId: trade.id,
  serviceName: service.name,
  cityName: city.name
});

// AfiÈ™eazÄƒ stats doar dacÄƒ sunt impresionante (evitÄƒ 1.7/5 sau 1 lucrare)
const heroStats = [
  (metrics.avgRating && metrics.avgRating >= 4.0) ? { label: 'Rating mediu', value: `${metrics.avgRating.toFixed(1)}/5` } : null,
  (metrics.jobsLast30Days && metrics.jobsLast30Days >= 5) ? { label: 'LucrÄƒri Ã®n ultimele 30 zile', value: `${metrics.jobsLast30Days}` } : null,
  (metrics.avgBudget && metrics.avgBudget >= 100) ? { label: 'Buget mediu acceptat', value: `${Math.round(metrics.avgBudget)} RON` } : null
].filter(Boolean) as Array<{ label: string; value: string }>;

const localBusinessSchema = createLocalBusinessSchema({
  serviceName: service.name,
  cityName: city.name,
  canonical,
  metrics
});

const faqSchema = buildFaqSchema(sanityContent?.faqSection);
const offerCatalogSchema = buildOfferCatalogSchema(sanityContent?.priceRanges, service.name, city.name);
const priceSummaryText = metrics.avgBudget
  ? `Bugetele acceptate Ã®n ultimele 30 de zile au avut o medie de ${Math.round(metrics.avgBudget)} RON.`
  : 'SolicitÄƒ o ofertÄƒ personalizatÄƒ pentru a primi preÈ›uri exacte.';
---

<Base title={title} description={description} canonical={canonical} disableDefaultBreadcrumb={true}>
  <!-- SEO Keywords -->
  <meta slot="head" name="keywords" content={keywords} />
  
  <!-- Structured Data - LocalBusiness Schema -->
  <script is:inline slot="head" type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
  {faqSchema && (
    <script is:inline slot="head" type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  )}
  {offerCatalogSchema && (
    <script is:inline slot="head" type="application/ld+json" set:html={JSON.stringify(offerCatalogSchema)} />
  )}
  
  <!-- Structured Data - Breadcrumb Schema -->
  <script is:inline slot="head" type="application/ld+json" set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: [
      {
        '@type': 'ListItem',
        position: 1,
        name: 'AcasÄƒ',
        item: 'https://www.meseriaslocal.ro'
      },
      {
        '@type': 'ListItem',
        position: 2,
        name: 'Servicii',
        item: 'https://www.meseriaslocal.ro/servicii'
      },
      {
        '@type': 'ListItem',
        position: 3,
        name: service.name,
        item: `https://www.meseriaslocal.ro/servicii/${categorie}/${serviciu}/`
      },
      {
        '@type': 'ListItem',
        position: 4,
        name: city.name
      }
    ]
  })} />

  <!-- Modern Hero Section - Same colors as homepage -->
  <section 
    class="relative overflow-hidden py-16 lg:py-20"
    style="background: linear-gradient(180deg, #1b1f1d 0%, #21251f 50%, #2a302b 100%)"
  >
    <!-- Grid pattern -->
    <div class="absolute inset-0 opacity-15">
      <div
        class="absolute inset-0"
        style="background-image: linear-gradient(rgba(45, 51, 45, 0.4) 1px, transparent 1px), linear-gradient(90deg, rgba(45, 51, 45, 0.4) 1px, transparent 1px); background-size: 60px 60px"
      ></div>
    </div>

    <!-- Floating geometric shapes -->
    <div class="absolute inset-0 opacity-15">
      <div class="absolute top-24 left-40 w-14 h-14 border-2 border-emerald-400/30 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
      <div class="absolute top-48 left-20 w-10 h-10 bg-emerald-400/15 rounded-full animate-bounce" style="animation-delay: 1s"></div>
      <div class="absolute top-20 right-28 w-16 h-16 border-2 border-teal-400/30 rounded-full animate-pulse" style="animation-delay: 1.5s"></div>
      <div class="absolute top-52 right-16 w-12 h-12 bg-emerald-400/15 rounded-full animate-bounce" style="animation-delay: 2s"></div>
    </div>

    <div class="relative z-10 max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <!-- Breadcrumbs - Subtle & Clean (like Remix) -->
        <nav class="flex justify-center mb-6">
          <div class="bg-slate-800/40 backdrop-blur-md rounded-full px-4 py-2 border border-slate-700/50">
            <ol class="flex items-center space-x-2 text-slate-300 text-xs font-medium">
              <li class="flex items-center">
                <a href="/" class="hover:text-white transition-colors">AcasÄƒ</a>
              </li>
              
              <!-- Hide middle items on mobile, show on sm+ -->
              <li class="hidden sm:flex items-center">
                <span class="mx-2 text-white/40">â€º</span>
                <a href="/servicii/" class="hover:text-white transition-colors">Servicii</a>
              </li>
              
              <li class="hidden md:flex items-center">
                <span class="mx-2 text-white/40">â€º</span>
                <a href={`/servicii/${categorie}/${serviciu}/`} class="hover:text-white transition-colors truncate max-w-[150px]">{service.name}</a>
              </li>
              
              <!-- Show ellipsis on mobile/tablet when items are hidden -->
              <li class="sm:hidden flex items-center">
                <span class="mx-2 text-white/40">â€º</span>
                <span class="text-slate-400">...</span>
              </li>
              
              <li class="flex items-center">
                <span class="mx-2 text-white/40">â€º</span>
                <span class="text-orange-400 font-semibold">{city.name}</span>
              </li>
            </ol>
          </div>
        </nav>

        <!-- Hero Content -->
        <div class="text-center lg:text-left">
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 leading-tight">
            {heroTitle}
          </h1>
          
          <p class="text-xl text-slate-300 mb-4">
            {heroSubtitle}
          </p>
          
          <p class="text-lg text-slate-300 mb-8 leading-relaxed">
            {heroDescription}
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-wrap items-center justify-center lg:justify-start gap-4">
            <a
              href={`${APP_URL}/cere-oferta`}
              class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]"
            >
              Cere OfertÄƒ GratuitÄƒ
              <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </a>
            <div class="flex items-center gap-2 text-slate-400 text-sm">
              <div class="flex items-center gap-1.5 px-2.5 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-400/30">
                <span class="text-emerald-300 text-xs font-medium">RÄƒspuns rapid</span>
              </div>
              <div class="flex items-center gap-1.5 px-2.5 py-1.5 rounded-full bg-teal-500/20 border border-teal-400/30">
                <span class="text-teal-300 text-xs font-medium">100% gratuit</span>
              </div>
            </div>
          </div>

          {heroStats.length > 0 && (
            <div class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
              {heroStats.map((stat) => (
                <div class="bg-white/10 border border-white/20 rounded-2xl px-4 py-5 shadow-sm text-center">
                  <p class="text-2xl font-bold text-white">{stat.value}</p>
                  <p class="text-sm text-slate-200 mt-1">{stat.label}</p>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <article class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-8 sm:py-12">
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-8">
      <!-- Main Content Column -->
      <div class="lg:col-span-2">
        
        <!-- De ce MeseriaÈ™ Local - SECÈšIUNE DEDICATÄ‚ -->
        <section class="mb-8 sm:mb-12 bg-white rounded-2xl p-4 sm:p-8 border border-slate-200 shadow-sm">
          <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-4 sm:mb-6 flex items-center gap-3">
            <span class="w-10 h-10 bg-emerald-600 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
            </span>
            De ce sÄƒ foloseÈ™ti MeseriaÈ™ Local?
          </h2>
          <div class="grid md:grid-cols-2 gap-3 sm:gap-6">
            <div class="flex gap-3">
              <div class="w-10 h-10 sm:w-12 sm:h-12 bg-emerald-100 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-5 h-5 sm:w-6 sm:h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-slate-900 mb-2">Conectare DirectÄƒ</h3>
                <p class="text-slate-600 text-sm">VorbeÈ™ti direct cu meseriaÈ™ii, fÄƒrÄƒ intermediari. Tu decizi cu cine lucrezi.</p>
              </div>
            </div>
            <div class="flex gap-4">
              <div class="w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-slate-900 mb-2">FÄƒrÄƒ Comisioane</h3>
                <p class="text-slate-600 text-sm">Nu plÄƒteÈ™ti nimic platformei. PreÈ›ul convenit e preÈ›ul final.</p>
              </div>
            </div>
            <div class="flex gap-4">
              <div class="w-12 h-12 bg-cyan-100 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-slate-900 mb-2">Oferte Ã®n 24h</h3>
                <p class="text-slate-600 text-sm">PrimeÈ™ti oferte personalizate rapid, de obicei Ã®n cÃ¢teva ore.</p>
              </div>
            </div>
            <div class="flex gap-4">
              <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-slate-900 mb-2">MeseriaÈ™i VerificaÈ›i</h3>
                <p class="text-slate-600 text-sm">ToÈ›i profesioniÈ™tii sunt verificaÈ›i È™i au recenzii reale.</p>
              </div>
            </div>
          </div>
          <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-slate-200">
            <a
              href={`${APP_URL}/cere-oferta?tradeId=${trade.id}&title=${encodeURIComponent(service.name)}`}
              class="inline-flex items-center px-4 sm:px-6 py-2.5 sm:py-3 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base"
            >
              Cere OfertÄƒ GratuitÄƒ Acum
              <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </a>
          </div>
        </section>

        <!-- Content - VIZIBIL BY DEFAULT -->
        {sanityContent && (
          <div class="mb-8 sm:mb-12 bg-white rounded-2xl p-4 sm:p-8 border border-slate-200 shadow-sm">
            <div class="max-w-none seo-content" set:html={content} />
            
            <!-- CTA Ã®n mijlocul conÈ›inutului -->
            <div class="my-8 sm:my-12 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-4 sm:p-6 border border-amber-200 text-center">
              <p class="text-slate-900 font-semibold mb-4">Ai nevoie de {service.name.toLowerCase()} Ã®n {city.name}?</p>
              <a
                href={`${APP_URL}/cere-oferta?tradeId=${trade.id}&title=${encodeURIComponent(service.name)}`}
                class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-orange-600 transition-all"
              >
                SolicitÄƒ Oferte Gratuite
                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            </div>
          </div>
        )}
    
      </div>

      <!-- Sidebar Column -->
      <div class="lg:col-span-1">
        <div class="sticky top-24 space-y-6">
          
          <!-- CTA Card -->
          <div class="bg-gradient-to-br from-emerald-600 to-teal-600 rounded-2xl p-4 sm:p-6 text-white shadow-xl">
            <h3 class="text-xl font-bold mb-3">Cere OfertÄƒ GratuitÄƒ</h3>
            <p class="text-emerald-100 text-sm mb-4">PrimeÈ™ti oferte personalizate Ã®n 2-4 ore</p>
            <a
              href={`${APP_URL}/cere-oferta?tradeId=${trade.id}&title=${encodeURIComponent(service.name)}`}
              class="block w-full text-center px-6 py-3 bg-white text-emerald-600 font-semibold rounded-xl hover:bg-emerald-50 transition-all shadow-lg"
            >
              SolicitÄƒ Acum
            </a>
            <div class="mt-4 pt-4 border-t border-white/20 space-y-2 text-sm">
              <div class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span>FÄƒrÄƒ comisioane</span>
              </div>
              <div class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span>RÄƒspuns rapid</span>
              </div>
              <div class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span>MeseriaÈ™i verificaÈ›i</span>
              </div>
            </div>
          </div>

          <!-- Price Ranges - SIDEBAR -->
          {sanityContent?.priceRanges && sanityContent.priceRanges.length > 0 && (
            <div class="bg-white rounded-2xl p-4 sm:p-6 border border-slate-200 shadow-sm">
              <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                PreÈ›uri Ã®n {city.name}
              </h3>
              <div class="space-y-3">
                {sanityContent.priceRanges.slice(0, 5).map((price: { service: string; minPrice: number; maxPrice: number }) => (
                  <div class="flex justify-between items-start gap-2 pb-3 border-b border-slate-100 last:border-0">
                    <span class="text-sm text-slate-700">{price.service}</span>
                    <span class="text-sm font-semibold text-slate-900 whitespace-nowrap">{price.minPrice}-{price.maxPrice} lei</span>
                  </div>
                ))}
              </div>
              <p class="text-xs text-slate-500 mt-4">* PreÈ›uri orientative</p>
            </div>
          )}

          <!-- Cartiere - SIDEBAR -->
          {city.neighborhoods && city.neighborhoods.length > 0 && (
            <div class="bg-white rounded-2xl p-4 sm:p-6 border border-slate-200 shadow-sm">
              <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Acoperim toate cartierele
              </h3>
              <div class="flex flex-wrap gap-2">
                {city.neighborhoods.slice(0, 8).map((neighborhood: string) => (
                  <span class="px-3 py-1.5 bg-slate-100 text-slate-700 text-xs font-medium rounded-full">
                    {neighborhood}
                  </span>
                ))}
              </div>
              <p class="text-xs text-slate-500 mt-4">MeseriaÈ™i disponibili Ã®n toate zonele din {city.name}</p>
            </div>
          )}

        </div>
      </div>
    </div>
    
    <!-- Cartiere Section - MAIN CONTENT -->
    {city.neighborhoods && city.neighborhoods.length > 0 && (
      <section id="cartiere" class="mb-8 sm:mb-12 max-w-4xl">
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 sm:p-8 border border-green-200">
          <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
            <span class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </span>
            Acoperim toate cartierele din {city.name}
          </h2>
          <p class="text-slate-700 mb-6">
            MeseriaÈ™ii noÈ™tri {service.name.toLowerCase()} sunt disponibili Ã®n toate zonele din {city.name}. Indiferent unde te afli, gÄƒseÈ™ti rapid un profesionist verificat.
          </p>
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
            {city.neighborhoods.map((neighborhood: string) => (
              <div class="bg-white rounded-lg px-4 py-3 border border-green-200 text-center">
                <span class="text-slate-900 font-medium text-sm">{neighborhood}</span>
              </div>
            ))}
          </div>
        </div>
      </section>
    )}

    <!-- Local Tips -->
    {sanityContent?.localTips && sanityContent.localTips.length > 0 && (
      <section id="sfaturi-locale" class="mb-8 sm:mb-12 max-w-4xl">
        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-amber-600 rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
          </span>
          Sfaturi locale pentru {city.name}
        </h2>
        <div class="grid md:grid-cols-2 gap-6">
          {sanityContent.localTips.map((tip: { title: string; description: string }) => (
            <div class="bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6">
              <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                <svg class="w-5 h-5 text-amber-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
                {tip.title}
              </h3>
              <p class="text-slate-700 leading-relaxed">{tip.description}</p>
            </div>
          ))}
        </div>
      </section>
    )}
    
    <!-- FAQ - ÃŽMBUNÄ‚TÄ‚ÈšIT -->
    {sanityContent?.faqSection && sanityContent.faqSection.length > 0 && (
      <section id="intrebari-frecvente" class="mb-8 sm:mb-12 max-w-4xl">
        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </span>
          ÃŽntrebÄƒri Frecvente
        </h2>
        <div class="space-y-4">
          {sanityContent.faqSection.map((item: { question: string; answer: string }, index: number) => (
            <details class="group bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all">
              <summary class="cursor-pointer list-none p-6 flex items-center justify-between">
                <div class="flex items-start gap-4 flex-1">
                  <span class="w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0">
                    {index + 1}
                  </span>
                  <h3 class="font-semibold text-slate-900 text-lg">{item.question}</h3>
                </div>
                <svg class="w-6 h-6 text-slate-400 group-open:rotate-180 transition-transform flex-shrink-0 ml-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div class="px-6 pb-6 pl-18">
                <p class="text-slate-700 leading-relaxed">{item.answer}</p>
              </div>
            </details>
          ))}
        </div>
      </section>
    )}
    
    <!-- Nearby Cities -->
    {nearbyCityLinks.length > 0 && (
      <section id="orase-apropiate" class="mb-8 sm:mb-12">
        <h2 class="text-2xl font-bold mb-6">OraÈ™e Apropiate</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          {nearbyCityLinks.map(nearbyCity => (
            <a 
              href={`/servicii/${categorie}/${serviciu}/${nearbyCity.slug}/`}
              class="p-4 bg-white rounded-lg border border-gray-200 hover:border-emerald-500 hover:shadow-md transition"
            >
              <h3 class="font-semibold">{service.name} {nearbyCity.name}</h3>
            </a>
          ))}
        </div>
      </section>
    )}
    
    <!-- Related Services from Sanity (if available) or Similar Services -->
    {(sanityContent?.relatedServices && sanityContent.relatedServices.length > 0) ? (
      <section id="servicii-conexe" class="mb-12">
        <h2 class="text-2xl font-bold mb-6">Servicii Conexe Ã®n {city.name}</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          {sanityContent.relatedServices.map((relatedService: { serviceName: string; serviceSlug: string }) => {
            // Clean the serviceSlug - extract just the slug part if it contains a full path
            let cleanSlug = relatedService.serviceSlug;
            
            // Remove leading/trailing slashes
            cleanSlug = cleanSlug.replace(/^\/+|\/+$/g, '');
            
            // If it contains 'servicii/', extract everything after the last slash
            if (cleanSlug.includes('/')) {
              const parts = cleanSlug.split('/');
              cleanSlug = parts[parts.length - 1];
            }
            
            // Get the category from pre-fetched data
            const category = relatedServiceCategories[cleanSlug];
            const relatedCategorySlug = category 
              ? category.toLowerCase()
                  .replace(/\s+&\s+/g, '-')  // Replace " & " with "-"
                  .replace(/&/g, '')  // Remove any remaining &
                  .replace(/\s+/g, '-')
                  .replace(/È™/g, 's')
                  .replace(/È›/g, 't')
                  .replace(/Äƒ/g, 'a')
                  .replace(/Ã¢/g, 'a')
                  .replace(/Ã®/g, 'i')
                  .replace(/[^a-z0-9-]/g, '')
                  .replace(/-+/g, '-')  // Replace multiple dashes with single dash
              : categorie;
            
            return (
              <a 
                href={`/servicii/${relatedCategorySlug}/${cleanSlug}/${oras}/`}
                class="p-4 bg-white rounded-lg border border-gray-200 hover:border-emerald-500 hover:shadow-md transition text-center"
              >
                <h3 class="font-semibold">{relatedService.serviceName}</h3>
              </a>
            );
          })}
        </div>
      </section>
    ) : (
      <section id="servicii-conexe" class="mb-12">
        <h2 class="text-2xl font-bold mb-6">Servicii Similare Ã®n {city.name}</h2>
        {similarServices.length > 0 ? (
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            {similarServices.map(similarService => (
              <a 
                href={`/servicii/${categorie}/${similarService.slug}/${oras}/`}
                class="p-4 bg-white rounded-lg border border-gray-200 hover:border-emerald-500 hover:shadow-md transition text-center"
              >
                <h3 class="font-semibold">{similarService.name}</h3>
              </a>
            ))}
          </div>
        ) : (
          <div class="bg-white rounded-xl border border-slate-200 p-6 text-center">
            <p class="text-gray-700 mb-4">DescoperÄƒ alte servicii specializate verificate la nivel naÈ›ional.</p>
            <a
              href={`/servicii/${categorie}/`}
              class="inline-flex items-center justify-center px-4 py-2 bg-emerald-600 text-white font-semibold rounded-lg hover:bg-emerald-700 transition"
            >
              Vezi toate serviciile
            </a>
          </div>
        )}
      </section>
    )}
    
    <!-- Final CTA Section -->
    <section class="mt-12 sm:mt-16 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-6 sm:p-8 text-center border border-emerald-100">
      <h2 class="text-xl sm:text-2xl font-bold text-slate-900 mb-3 sm:mb-4">Gata sÄƒ ÃŽncepi Proiectul TÄƒu?</h2>
      <p class="text-slate-700 mb-4 sm:mb-6 max-w-2xl mx-auto text-sm sm:text-base">
        PrimeÈ™te oferte gratuite de la meseriaÈ™i verificaÈ›i din {city.name}. RÄƒspuns rapid Ã®n 2â€“4 ore, fÄƒrÄƒ comisioane ascunse.
      </p>
      <a
        href={`https://app.meseriaslocal.ro/cere-oferta?oras=${oras}`}
        class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]"
      >
        Cere OfertÄƒ Acum
        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
      </a>
    </section>
  </article>
</Base>

<style>
  /* Premium SEO Content Styling */
  .seo-content {
    font-size: 1rem;
    line-height: 1.75;
  }
  
  /* Headings with premium styling */
  .seo-content h2 {
    scroll-margin-top: 100px;
  }
  
  .seo-content h3 {
    scroll-margin-top: 100px;
  }
  
  /* Paragraphs with better readability */
  .seo-content p {
    max-width: 75ch;
  }
  
  /* Lists with better spacing */
  .seo-content ul {
    background: linear-gradient(to right, #f0fdf4 0%, #ffffff 100%);
    border-radius: 12px;
    padding: 1.5rem;
    border-left: 4px solid #10b981;
  }
  
  .seo-content ol {
    background: linear-gradient(to right, #fef3c7 0%, #ffffff 100%);
    border-radius: 12px;
    padding: 1.5rem;
    border-left: 4px solid #f59e0b;
    counter-reset: item;
  }
  
  .seo-content ol li {
    counter-increment: item;
    position: relative;
    padding-left: 2rem;
  }
  
  .seo-content ol li::before {
    content: counter(item);
    position: absolute;
    left: 0;
    top: 0;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.75rem;
  }
  
  /* Links with premium hover effect */
  .seo-content a {
    position: relative;
    transition: all 0.2s;
  }
  
  .seo-content a:hover {
    color: #059669;
    transform: translateX(2px);
  }
  
  /* Blockquotes with premium design */
  .seo-content blockquote {
    position: relative;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }
  
  .seo-content blockquote::before {
    content: '"';
    position: absolute;
    top: -10px;
    left: 10px;
    font-size: 4rem;
    color: #10b981;
    opacity: 0.2;
    font-family: Georgia, serif;
  }
  
  /* Strong text with better emphasis */
  .seo-content strong {
    background: linear-gradient(to right, #d1fae5 0%, transparent 100%);
    padding: 0 4px;
    border-radius: 3px;
  }
  
  /* Code blocks */
  .seo-content code {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
</style>
