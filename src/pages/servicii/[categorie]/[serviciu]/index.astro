---
import Base from '../../../../layouts/Base.astro';
import { cities } from '../../../../data';
import { getServicePage } from '../../../../lib/sanity';
import { supabase } from '../../../../lib/supabase';
import { getPublicSupabaseConfig } from '../../../../lib/publicEnv';
import { RecommendedTradesmen } from '../../../../components/tradesman/RecommendedTradesmen';

export const prerender = false;
export const config = { revalidate: 1800 };

// Set headers for proper indexing
Astro.response.headers.set('X-Robots-Tag', 'index, follow');
Astro.response.headers.set('Cache-Control', 'public, max-age=1800, s-maxage=1800, stale-while-revalidate=86400');

const { categorie, serviciu } = Astro.params;

if (!categorie || !serviciu) {
  return Astro.redirect('/404');
}

const { url: supabaseUrl, anonKey: supabaseAnonKey } = getPublicSupabaseConfig();

if (!supabase) {
  return Astro.redirect('/servicii', 500);
}

const { data: trade, error: tradeError } = await supabase
  .from('trades')
  .select('id, name, slug, category')
  .eq('slug', serviciu)
  .single();

if (tradeError || !trade) {
  return Astro.redirect('/404');
}

const service = {
  name: trade.name,
  slug: trade.slug,
  category: trade.category,
  categorySlug: categorie,
};

// Try to get custom content from Sanity
const sanityContent = await getServicePage(serviciu);

// Debug: Log what we get from Sanity
if (import.meta.env.DEV) {
  console.log('üîç Sanity Debug for service page:');
  console.log('  tradeSlug:', serviciu);
  console.log('  sanityContent:', sanityContent);
  console.log('  seoTitle:', sanityContent?.seoTitle);
  console.log('  seoDescription:', sanityContent?.seoDescription);
}

// Helper to render portable text with support for links, marks, and internal city linking
function renderPortableText(blocks: any[]) {
  if (!blocks) return '';
  
  let html = '';
  
  for (const block of blocks) {
    if (block._type !== 'block') continue;
    
    const text = block.children?.map((child: any) => {
      let processedText = child.text;
      
      // Handle marks
      if (child.marks?.length) {
        if (child.marks.includes('strong')) {
          processedText = `<strong>${processedText}</strong>`;
        }
        if (child.marks.includes('em')) {
          processedText = `<em>${processedText}</em>`;
        }
      }
      
      // Handle internal links
      if (child._type === 'span' && child.marks?.includes('link')) {
        const linkMark = block.markDefs?.find((mark: any) => mark._type === 'link' && child.marks.includes(mark._key));
        if (linkMark) {
          processedText = `<a href="${linkMark.href}" class="text-emerald-600 hover:text-emerald-700 underline">${processedText}</a>`;
        }
      }
      
      return processedText;
    }).join('') || '';
    
    // Auto-link city names for internal linking
    const cityNames = ['Bucure»ôti', 'Cluj-Napoca', 'Timi»ôoara', 'Ia»ôi', 'Constan»õa', 'Craiova', 'Bra»ôov', 'Gala»õi', 'Ploie»ôti', 'Oradea'];
    let finalText = text;
    
    cityNames.forEach(city => {
      const citySlug = city.toLowerCase()
        .replace(/»ô/g, 's')
        .replace(/»õ/g, 't')
        .replace(/ƒÉ/g, 'a')
        .replace(/√Æ/g, 'i')
        .replace(/√¢/g, 'a')
        .replace(/ /g, '-');
      
      // Create regex for whole word matching
      const regex = new RegExp(`\\b${city}\\b`, 'gi');
      finalText = finalText.replace(regex, `<a href="/servicii/${categorie}/${serviciu}/${citySlug}/" class="text-emerald-600 hover:text-emerald-700 underline font-medium">${city}</a>`);
    });
    
    if (finalText.trim()) {
      if (block.style === 'h2') {
        html += `<h2 class="text-2xl font-bold text-slate-900 mb-4">${finalText}</h2>`;
      } else if (block.style === 'h3') {
        html += `<h3 class="text-xl font-semibold text-slate-900 mb-3">${finalText}</h3>`;
      } else {
        html += `<p class="text-slate-700 mb-4 leading-relaxed">${finalText}</p>`;
      }
    }
  }
  
  return html;
}

// SEO optimized content
const canonical = `https://www.meseriaslocal.ro/servicii/${categorie}/${serviciu}/`;
const title = sanityContent?.seoTitle || `${service.name} ‚Äì Profesioni»ôti Verifica»õi, Oferte Rapide`;
const description = sanityContent?.seoDescription || `GƒÉse»ôte ${service.name.toLowerCase()} verifica»õi √Æn Rom√¢nia. Peste 150+ meseria»ôi certifica»õi √Æn 42 ora»ôe. Oferte gratuite √Æn 24h, recenzii reale, garan»õie satisfac»õie.`;
const keywords = `${service.name.toLowerCase()}, ${service.name.toLowerCase()} profesionist, ${service.name.toLowerCase()} verificat, pre»õ ${service.name.toLowerCase()}, ${service.name.toLowerCase()} Rom√¢nia, meseria»ôi ${service.name.toLowerCase()}`;

// Top 10 major cities in Romania
const topCities = [
  { name: 'Bucure»ôti', slug: 'bucuresti' },
  { name: 'Cluj-Napoca', slug: 'cluj-napoca' },
  { name: 'Timi»ôoara', slug: 'timisoara' },
  { name: 'Ia»ôi', slug: 'iasi' },
  { name: 'Constan»õa', slug: 'constanta' },
  { name: 'Craiova', slug: 'craiova' },
  { name: 'Bra»ôov', slug: 'brasov' },
  { name: 'Gala»õi', slug: 'galati' },
  { name: 'Ploie»ôti', slug: 'ploiesti' },
  { name: 'Oradea', slug: 'oradea' }
];

// Content from Sanity or fallback
const content = sanityContent?.content ? renderPortableText(sanityContent.content) : `
  <h2 class="text-2xl font-bold text-slate-900 mb-4">GƒÉse»ôte ${service.name.toLowerCase()} verifica»õi √Æn Rom√¢nia</h2>
  <p class="text-slate-700 mb-4 leading-relaxed">Platforma Meserias Local conecteazƒÉ clien»õii cu peste 150+ meseria»ôi certifica»õi pentru servicii de ${service.name.toLowerCase()} √Æn toate ora»ôele importante din Rom√¢nia. To»õi profesioni»ôtii sunt verifica»õi, cu experien»õƒÉ doveditƒÉ »ôi recenzii reale.</p>
  
  <h3 class="text-xl font-semibold text-slate-900 mb-3">Acoperire na»õionalƒÉ completƒÉ</h3>
  <p class="text-slate-700 mb-4 leading-relaxed">Meserias Local acoperƒÉ √Æntreaga Rom√¢nƒÉ, de la Bucure»ôti la Cluj-Napoca, de la Timi»ôoara la Ia»ôi »ôi p√¢nƒÉ √Æn Constan»õa, Craiova, Bra»ôov, Gala»õi, Ploie»ôti »ôi Oradea. Indiferent de loca»õia ta, vei gƒÉsi profesioni»ôti ${service.name.toLowerCase()} verifica»õi pregƒÉti»õi sƒÉ te ajute.</p>
  
  <h3 class="text-xl font-semibold text-slate-900 mb-3">De ce sƒÉ alegi Meserias Local?</h3>
  <p class="text-slate-700 mb-4 leading-relaxed">Prime»ôti oferte multiple √Æn 2-4 ore, po»õi compara pre»õuri »ôi recenzii, »ôi alegi cel mai bun profesionist pentru proiectul tƒÉu. Serviciul este 100% gratuit pentru clien»õi, fƒÉrƒÉ comisioane ascunse.</p>
  
  <h3 class="text-xl font-semibold text-slate-900 mb-3">Cum func»õioneazƒÉ?</h3>
  <p class="text-slate-700 mb-4 leading-relaxed">Completezi o cerere cu detaliile lucrƒÉrii, prime»ôti oferte personalizate de la meseria»ôi verifica»õi, compari »ôi alegi cea mai bunƒÉ ofertƒÉ. Simplu, rapid »ôi sigur!</p>
`;

// Get similar services
let similarServices: Array<{ name: string; slug: string }> = [];
if (supabase) {
  const { data: similarTrades } = await supabase
    .from('trades')
    .select('name, slug')
    .eq('category', trade.category)
    .neq('slug', serviciu)
    .limit(6);
  
  if (similarTrades) {
    similarServices = similarTrades;
  }
}

// Enhanced structured data for SEO
const serviceSchema = {
  '@context': 'https://schema.org',
  '@type': 'Service',
  name: service.name,
  description: `Servicii profesionale ${service.name.toLowerCase()} √Æn Rom√¢nia. Meseria»ôi verifica»õi √Æn Bucure»ôti, Cluj-Napoca, Timi»ôoara, Ia»ôi, Constan»õa, Craiova, Bra»ôov, Gala»õi, Ploie»ôti, Oradea »ôi √Æn toatƒÉ »õara.`,
  url: canonical,
  provider: {
    '@type': 'Organization',
    name: 'Meserias Local',
    url: 'https://www.meseriaslocal.ro',
    address: {
      '@type': 'PostalAddress',
      addressCountry: 'RO'
    }
  },
  areaServed: {
    '@type': 'Country',
    name: 'Rom√¢nia'
  },
  availableChannel: {
    '@type': 'ServiceChannel',
    serviceUrl: canonical,
    servicePhone: '+40-XX-XXXX-XXXX',
    serviceEmail: 'contact@meseriaslocal.ro'
  },
  serviceType: service.name,
  category: service.category,
  offers: {
    '@type': 'Offer',
    itemOffered: {
      '@type': 'Service',
      name: service.name,
      description: `Servicii ${service.name.toLowerCase()} verificate √Æn Rom√¢nia`
    },
    priceCurrency: 'RON',
    availability: 'https://schema.org/InStock',
    seller: {
      '@type': 'Organization',
      name: 'Meserias Local'
    }
  },
  hasOfferCatalog: {
    '@type': 'OfferCatalog',
    name: `${service.name} Services in Romania`,
    numberOfItems: 10
  }
};

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  name: `${service.name} - Breadcrumb Navigation`,
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'AcasƒÉ',
      item: 'https://www.meseriaslocal.ro'
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Servicii',
      item: 'https://www.meseriaslocal.ro/servicii'
    },
    {
      '@type': 'ListItem',
      position: 3,
      name: service.name,
      item: canonical
    }
  ]
};

const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: `C√¢t costƒÉ serviciile de ${service.name.toLowerCase()}?`,
      acceptedAnswer: {
        '@type': 'Answer',
        text: `Pre»õurile pentru ${service.name.toLowerCase()} variazƒÉ √Æn func»õie de complexitatea proiectului. Pe Meserias Local prime»ôti oferte gratuite personalizate de la mai mul»õi profesioni»ôti, astfel po»õi compara pre»õurile »ôi alege oferta cea mai bunƒÉ.`
      }
    },
    {
      '@type': 'Question',
      name: `Cum gƒÉsesc ${service.name.toLowerCase()} de √Æncredere?`,
      acceptedAnswer: {
        '@type': 'Answer',
        text: `Pe Meserias Local to»õi meseria»ôii sunt verifica»õi cu identitate confirmatƒÉ. VerificƒÉ recenziile, portofoliul »ôi rating-ul pentru a alege cel mai bun profesionist.`
      }
    },
    {
      '@type': 'Question',
      name: '√én c√¢t timp primesc oferte?',
      acceptedAnswer: {
        '@type': 'Answer',
        text: 'De obicei prime»ôti primele oferte √Æn 2-4 ore de la postarea cererii. √én 24 de ore vei avea 3-5 oferte complete de la profesioni»ôti din zona ta.'
      }
    }
  ]
};

---

<Base title={title} description={description} canonical={canonical} disableDefaultBreadcrumb={true}>
  <!-- Enhanced SEO Meta Tags -->
  <meta slot="head" name="keywords" content={keywords} />
  <meta slot="head" property="og:title" content={title} />
  <meta slot="head" property="og:description" content={description} />
  <meta slot="head" property="og:url" content={canonical} />
  <meta slot="head" property="og:type" content="website" />
  <meta slot="head" name="twitter:card" content="summary_large_image" />
  <meta slot="head" name="twitter:title" content={title} />
  <meta slot="head" name="twitter:description" content={description} />
  
  <!-- Structured Data for Rich Snippets -->
  <script slot="head" is:inline type="application/ld+json" set:html={JSON.stringify(serviceSchema)}></script>
  <script slot="head" is:inline type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)}></script>
  <script slot="head" is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)}></script>

  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white">
    <div class="max-w-7xl mx-auto px-4 py-12 sm:py-16">
      <div class="max-w-4xl mx-auto text-center">
        <!-- Breadcrumb -->
        <nav class="flex justify-center mb-6">
          <ol class="flex items-center text-sm text-slate-300">
            <li><a href="/" class="hover:text-amber-400">AcasƒÉ</a></li>
            <li><span class="mx-2 text-white/40">‚Ä∫</span></li>
            <li><a href="/servicii" class="hover:text-amber-400">Servicii</a></li>
            <li><span class="mx-2 text-white/40">‚Ä∫</span></li>
            <li><span class="text-orange-400 font-semibold">{service.name}</span></li>
          </ol>
        </nav>

        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4">
          {sanityContent?.heroTitle || `${service.name} ‚Äì Profesioni»ôti Verifica»õi √Æn Rom√¢nia`}
        </h1>
        
        <p class="text-lg text-slate-300 mb-8 max-w-2xl mx-auto">
          {sanityContent?.heroDescription || `GƒÉse»ôte ${service.name.toLowerCase()} verifica»õi √Æn Bucure»ôti, Cluj-Napoca, Timi»ôoara, Ia»ôi, Constan»õa, Craiova, Bra»ôov, Gala»õi, Ploie»ôti, Oradea »ôi √Æn toatƒÉ Rom√¢nia. Peste 150+ meseria»ôi certifica»õi, oferte gratuite √Æn 24h.`}
        </p>

        <a 
          href="https://app.meseriaslocal.ro/cere-oferta"
          class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-600 shadow-lg"
        >
          SolicitƒÉ ofertƒÉ gratuitƒÉ
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- PRO Tradesmen Section -->
  <section class="bg-gradient-to-b from-slate-50 to-white py-6">
    <div class="max-w-7xl mx-auto px-4">
      <RecommendedTradesmen 
        tradeId={trade.id}
        tradeName={service.name}
        cityName="Rom√¢nia"
        supabaseUrl={supabaseUrl}
        supabaseAnonKey={supabaseAnonKey}
        maxResults={4}
        compact={true}
        client:load
      />
    </div>
  </section>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 py-8 sm:py-12">
    <div class="space-y-8 sm:space-y-10">
      <!-- Service Description -->
      <section class="bg-white rounded-lg p-6 border border-slate-200 shadow-sm">
        <h2 class="text-xl font-semibold text-slate-900 mb-6">Despre serviciul {service.name.toLowerCase()}</h2>
        <div class="prose prose-slate max-w-none">
          <div set:html={content}></div>
        </div>
      </section>

      <!-- CTA Section -->
      <section class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 text-white">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-lg font-semibold mb-2">Ai nevoie de {service.name.toLowerCase()}?</h3>
            <p class="text-blue-100 text-sm">Prime»ôti oferte personalizate √Æn 2-4 ore</p>
          </div>
          <a 
            href="https://app.meseriaslocal.ro/cere-oferta"
            class="inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 font-semibold rounded-md hover:bg-blue-50 transition-colors"
          >
            SolicitƒÉ ofertƒÉ gratuitƒÉ
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </a>
        </div>
        
        <div class="mt-4 pt-4 border-t border-white/20 grid grid-cols-3 gap-4 text-xs">
          <div class="flex items-center gap-2">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span>FƒÉrƒÉ obliga»õii</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
            </svg>
            <span>RƒÉspuns √Æn 2-4 ore</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
              <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
              <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
            </svg>
            <span>Oferte multiple</span>
          </div>
        </div>
      </section>

      <!-- Top Cities Section -->
      <section class="bg-white rounded-lg p-6 border border-slate-200 shadow-sm">
        <h2 class="text-xl font-semibold text-slate-900 mb-6">{service.name} √Æn Ora»ôele Principale din Rom√¢nia</h2>
        <p class="text-slate-600 mb-6">Acoperim cele mai importante ora»ôe din Rom√¢nia cu profesioni»ôti {service.name.toLowerCase()} verifica»õi. Indiferent de loca»õia ta, vei gƒÉsi expertul potrivit pentru proiectul tƒÉu.</p>
        
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
          {topCities.map(city => (
            <a 
              href={`/servicii/${categorie}/${serviciu}/${city.slug}/`}
              class="flex items-center gap-2 p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg hover:from-emerald-100 hover:to-teal-100 border border-emerald-200 transition-all group"
            >
              <svg class="w-5 h-5 text-emerald-600 group-hover:text-emerald-700 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
              </svg>
              <span class="text-slate-700 font-semibold group-hover:text-emerald-700 transition-colors">{city.name}</span>
            </a>
          ))}
        </div>
        
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200">
          <h3 class="text-xl font-bold text-slate-900 mb-3 flex items-center gap-2">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Acoperire Na»õionalƒÉ CompletƒÉ
          </h3>
          <p class="text-slate-600 mb-4">Pe l√¢ngƒÉ ora»ôele principale, Meserias Local acoperƒÉ »ôi alte ora»ôe din Rom√¢nia. Oric√¢t de micƒÉ ar fi localitatea ta, vom gƒÉsi profesioni»ôti {service.name.toLowerCase()} √Æn zonƒÉ.</p>
          <div class="flex items-center gap-4">
            <a 
              href="https://app.meseriaslocal.ro/cere-oferta"
              class="inline-flex items-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors"
            >
              CautƒÉ √Æn ora»ôul tƒÉu
              <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </a>
            <span class="text-slate-500 text-sm">‚Ä¢ RƒÉspuns √Æn 2-4 ore ‚Ä¢ Oferte gratuite ‚Ä¢ Garan»õie satisfac»õie</span>
          </div>
        </div>
      </section>

      <!-- FAQ Section -->
      <section class="bg-white rounded-lg p-6 border border-slate-200 shadow-sm">
        <h2 class="text-xl font-semibold text-slate-900 mb-6">√éntrebƒÉri frecvente</h2>
        <div class="space-y-4">
          <details class="border border-slate-200 rounded-lg overflow-hidden">
            <summary class="flex items-center justify-between p-4 cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors">
              <h3 class="font-semibold text-slate-900 pr-4">C√¢t costƒÉ serviciile de {service.name.toLowerCase()}?</h3>
              <svg class="w-5 h-5 text-slate-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="p-4 pt-0">
              <p class="text-slate-600">Pre»õurile variazƒÉ √Æn func»õie de complexitatea proiectului. Prime»ôti oferte gratuite personalizate de la mai mul»õi profesioni»ôti »ôi po»õi compara pre»õurile pentru a alege cea mai bunƒÉ variantƒÉ.</p>
            </div>
          </details>

          <details class="border border-slate-200 rounded-lg overflow-hidden">
            <summary class="flex items-center justify-between p-4 cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors">
              <h3 class="font-semibold text-slate-900 pr-4">Cum aleg un {service.name.toLowerCase()} de √Æncredere?</h3>
              <svg class="w-5 h-5 text-slate-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="p-4 pt-0">
              <p class="text-slate-600">To»õi meseria»ôii sunt verifica»õi cu identitate confirmatƒÉ. VerificƒÉ recenziile, portofoliul »ôi rating-ul pentru a alege cel mai bun profesionist pentru proiectul tƒÉu.</p>
            </div>
          </details>

          <details class="border border-slate-200 rounded-lg overflow-hidden">
            <summary class="flex items-center justify-between p-4 cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors">
              <h3 class="font-semibold text-slate-900 pr-4">√én c√¢t timp primesc oferte?</h3>
              <svg class="w-5 h-5 text-slate-500 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="p-4 pt-0">
              <p class="text-slate-600">De obicei prime»ôti primele oferte √Æn 2-4 ore. √én 24 de ore vei avea 3-5 oferte complete de la profesioni»ôti din zona ta.</p>
            </div>
          </details>
        </div>
      </section>

      <!-- Similar Services -->
      {similarServices.length > 0 && (
        <section class="bg-white rounded-lg p-6 border border-slate-200 shadow-sm">
          <h3 class="font-semibold text-slate-900 mb-4">Servicii similare</h3>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            {similarServices.map(similarService => (
              <a 
                href={`/servicii/${categorie}/${similarService.slug}/`}
                class="p-4 bg-slate-50 rounded-lg border border-slate-200 hover:border-blue-500 hover:shadow-sm transition text-center"
              >
                <h4 class="font-semibold text-sm">{similarService.name}</h4>
              </a>
            ))}
          </div>
        </section>
      )}

      <!-- Contact Info -->
      <div class="bg-white rounded-lg p-4 border border-slate-200 shadow-sm text-center">
        <h3 class="font-semibold text-slate-900 mb-3">Ai √ÆntrebƒÉri?</h3>
        <div class="flex justify-center gap-6">
          <a href="tel:0744123456" class="flex items-center gap-2 text-slate-700 hover:text-blue-600 transition-colors text-sm">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            +447930097259
          </a>
          
          <a href="mailto:contact@meseriaslocal.ro" class="flex items-center gap-2 text-slate-700 hover:text-blue-600 transition-colors text-sm">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2v10a2 2 0 002 2z" />
            </svg>
            contact@meseriaslocal.ro
          </a>
        </div>
      </div>
    </div>
  </div>
</Base>
