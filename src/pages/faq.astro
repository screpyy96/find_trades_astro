---
import Base from '../layouts/Base.astro';
import { validateEnvironment } from '../lib/env-validation';

const envConfig = validateEnvironment();
const WEB_URL = envConfig.config.web.url;
const APP_URL = envConfig.config.app.url;

const title = "Frequently Asked Questions (FAQ) | FindTrades";
const description = "Answers to the most common questions about the FindTrades platform. How to find tradesmen, how it works, prices, guarantees and safety.";
const canonical = `${WEB_URL}/faq`;

const faqCategories = [
  {
    title: "About the platform",
    icon: "üè†",
    faqs: [
      { q: "What is FindTrades?", a: "FindTrades is a platform that connects clients with verified tradesmen from across the UK. You can quickly find professionals for any type of work: construction, renovations, installations, cleaning and much more." },
      { q: "Is it free to use the platform?", a: "Yes, the platform is 100% free for clients. You can search for tradesmen, view profiles and request quotes at no cost. Tradesmen pay a subscription to be listed." },
      { q: "In which cities are you available?", a: "We cover all cities across the UK. We have tradesmen in London, Manchester, Birmingham, Leeds, Glasgow, Liverpool and all other regions." },
      { q: "How do you differentiate from other platforms?", a: "We verify every tradesman before listing, offer real reviews from clients, don't charge commissions on transactions and have dedicated support for resolving any issues." }
    ]
  },
  {
    title: "For clients",
    icon: "üë§",
    faqs: [
      { q: "How do I find a suitable tradesman?", a: "Use the search bar to find tradesmen by service and location. You can filter by reviews, experience and availability. View profiles and choose the one that suits you." },
      { q: "How do I request a quote?", a: "Click the 'Request Quote' button on the tradesman's profile or fill out the general form. Describe the work, add photos if you have them, and you'll receive quotes within 24-48 hours." },
      { q: "How do I know a tradesman is trustworthy?", a: "All PRO tradesmen are verified by our team. Check the 'Verified' badge, reviews from other clients, work portfolio and years of experience." },
      { q: "What if I'm not satisfied with the work?", a: "Contact us at support and we will mediate the situation. Verified tradesmen offer guarantees for their work. In serious cases, we can suspend the tradesman from the platform." },
      { q: "Can I negotiate the price with the tradesman?", a: "Yes, the displayed prices are indicative. Discuss directly with the tradesman to get a final price based on the specifics of your work." }
    ]
  },
  {
    title: "For tradesmen",
    icon: "üîß",
    faqs: [
      { q: "How do I register as a tradesman?", a: "Download the FindTrades app or access app.findtrades.app. Create an account, complete your profile with services offered, experience and portfolio, then choose a subscription." },
      { q: "How much does it cost to be listed on the platform?", a: "We offer PRO subscriptions starting from ¬£12/month and Enterprise for companies. The subscription includes verified profile, visibility in searches and access to quote requests." },
      { q: "How do I get new clients?", a: "Clients find you through search or send you quote requests. You receive notifications for each new request. The more positive reviews you have, the higher you appear in results." },
      { q: "What does the Verified badge mean?", a: "The Verified badge confirms that we have verified your identity, experience and quality of work. Verified tradesmen have priority in search results." },
      { q: "Can I cancel my subscription anytime?", a: "Yes, you can cancel your subscription at any time from your account settings. There is no minimum contract period." }
    ]
  },
  {
    title: "Prices and payments",
    icon: "üí∞",
    faqs: [
      { q: "How are prices determined?", a: "Prices are set directly between client and tradesman. The platform does not charge commissions on transactions. We display indicative prices to help you estimate costs." },
      { q: "What payment methods do you accept?", a: "Payment for work is made directly to the tradesman, in cash or bank transfer. For tradesmen subscriptions we accept card and bank transfer." },
      { q: "Are there hidden costs?", a: "No. The platform is free for clients. For tradesmen, the subscription cost is transparent and clearly displayed before purchase." },
      { q: "Do you provide invoices for subscriptions?", a: "Yes, all subscriptions include a tax invoice. You receive it automatically by email after each payment." }
    ]
  },
  {
    title: "Safety and guarantees",
    icon: "üõ°Ô∏è",
    faqs: [
      { q: "How do you verify tradesmen?", a: "We verify identity, declared experience, work portfolio and request references. Tradesmen with repeated negative reviews are suspended." },
      { q: "What guarantees do tradesmen offer?", a: "PRO tradesmen offer guarantees for work, usually between 1-5 years depending on the type of service. Discuss the guarantee before starting the work." },
      { q: "Is my data safe?", a: "Yes, we comply with GDPR and use encryption for all data. We do not sell your information to third parties. Read the Privacy Policy for details." },
      { q: "What do I do in case of fraud?", a: "Report immediately to support@findtrades.app. We investigate all cases and take action, including permanent suspension of fraudulent accounts." }
    ]
  }
];

const allFaqs = faqCategories.flatMap(cat => cat.faqs);

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": allFaqs.map(faq => ({
    "@type": "Question",
    "name": faq.q,
    "acceptedAnswer": { "@type": "Answer", "text": faq.a }
  }))
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": WEB_URL },
    { "@type": "ListItem", "position": 2, "name": "FAQ", "item": canonical }
  ]
};
---

<Base title={title} description={description} canonical={canonical} disableDefaultBreadcrumb={true}>
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(faqSchema)} is:inline></script>
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} is:inline></script>

  <!-- Hero Section -->
  <section class="py-12 sm:py-16" style="background: linear-gradient(180deg, #1a1d2e 0%, #1e2235 50%, #252a3d 100%)">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <nav class="flex justify-center mb-6">
          <ol class="flex items-center space-x-2 text-slate-300 text-xs font-medium">
            <li><a href="/" class="hover:text-white">Acasa</a></li>
            <li><span class="mx-2 text-white/40">/</span></li>
            <li><span class="text-amber-400 font-semibold">FAQ</span></li>
          </ol>
        </nav>

        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6">
          Intrebari Frecvente
        </h1>
        
        <p class="text-xl text-slate-300 mb-8">
          Gaseste raspunsuri la cele mai comune intrebari despre platforma Meserias Local
        </p>

        <div class="flex flex-wrap justify-center gap-3">
          {faqCategories.map((cat, i) => (
            <a href={`#cat-${i}`} class="px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm font-medium transition-colors">
              {cat.icon} {cat.title}
            </a>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Content -->
  <div class="max-w-4xl mx-auto px-4 py-12 sm:py-16">
    <div class="space-y-12">
      {faqCategories.map((category, catIndex) => (
        <section id={`cat-${catIndex}`} class="scroll-mt-8">
          <div class="flex items-center gap-3 mb-6">
            <span class="text-3xl">{category.icon}</span>
            <h2 class="text-2xl font-bold text-slate-900">{category.title}</h2>
          </div>
          
          <div class="space-y-4">
            {category.faqs.map((faq, faqIndex) => (
              <details class="group bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                <summary class="flex items-center justify-between p-5 cursor-pointer">
                  <span class="font-semibold text-slate-900 pr-4">{faq.q}</span>
                  <span class="text-slate-400 group-open:rotate-180 transition-transform flex-shrink-0">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </summary>
                <div class="px-5 pb-5 text-slate-600 leading-relaxed border-t border-slate-100 pt-4">
                  {faq.a}
                </div>
              </details>
            ))}
          </div>
        </section>
      ))}
    </div>

    <!-- Contact CTA -->
    <section class="mt-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-center">
      <h2 class="text-2xl font-bold text-white mb-4">
        Nu ai gasit raspunsul?
      </h2>
      <p class="text-blue-100 mb-6 max-w-xl mx-auto">
        Echipa noastra de suport iti sta la dispozitie pentru orice intrebare sau problema.
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="mailto:support@findtrades.app" class="inline-flex items-center px-6 py-3 bg-white text-blue-600 font-semibold rounded-xl hover:bg-blue-50 transition-colors">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          support@findtrades.app
        </a>
        <a href={APP_URL} class="inline-flex items-center px-6 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-colors border border-white/30">
          Deschide aplicatia
        </a>
      </div>
    </section>

    <!-- Quick Links -->
    <section class="mt-12 grid sm:grid-cols-3 gap-6">
      <a href="/servicii/" class="p-6 bg-slate-50 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors group">
        <div class="text-2xl mb-3">üîç</div>
        <h3 class="font-semibold text-slate-900 group-hover:text-blue-600">Cauta servicii</h3>
        <p class="text-sm text-slate-500 mt-1">Gaseste meseriasi pentru orice lucrare</p>
      </a>
      <a href="/despre-noi/" class="p-6 bg-slate-50 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors group">
        <div class="text-2xl mb-3">‚ÑπÔ∏è</div>
        <h3 class="font-semibold text-slate-900 group-hover:text-blue-600">Despre noi</h3>
        <p class="text-sm text-slate-500 mt-1">Afla mai multe despre platforma</p>
      </a>
      <a href="/blog/" class="p-6 bg-slate-50 rounded-xl border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-colors group">
        <div class="text-2xl mb-3">üìö</div>
        <h3 class="font-semibold text-slate-900 group-hover:text-blue-600">Blog</h3>
        <p class="text-sm text-slate-500 mt-1">Sfaturi si ghiduri utile</p>
      </a>
    </section>
  </div>
</Base>
